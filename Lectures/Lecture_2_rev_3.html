<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Calculus - Lecture 2: Pre-Calculus Review</title>

    <link rel="stylesheet" href="https://pyscript.net/releases/2024.2.1/core.css" />
    <script type="module" src="https://pyscript.net/releases/2024.2.1/core.js"></script>

    <py-config>
        packages = ["numpy", "matplotlib"]
        # Specify local files to be loaded into PyScript's virtual filesystem
        [[fetch]]
        files = ["unit_circle_animation.py"]
    </py-config>

    <script>
        MathJax = {
            tex: {
                inlineMath: [['$', '$'], ['\\(', '\\)']],
                displayMath: [['$$', '$$'], ['\\[', '\\]']]
            },
            svg: {
                fontCache: 'global'
            }
        };
    </script>
    <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>

    <style>
        body {
            font-family: 'Segoe UI', 'Helvetica Neue', Arial, sans-serif;
            line-height: 1.8;
            color: #333;
            background-color: #fdfdfd;
            overflow-y: scroll;
            font-size: 1.4em;
        }
        .container {
            max-width: 900px; /* This will control the width of your lecture content */
            margin: 20px auto;
            padding: 25px 40px;
            border: 1px solid #ddd;
            box-shadow: 0 4px 8px rgba(0,0,0,0.05);
            background-color: #fff;
        }
        h1, h2, h3 {
            color: #003366;
            border-bottom: 2px solid #e0e0e0;
            padding-bottom: 10px;
            font-weight: 400;
        }
        h1 { font-size: 2.0em; }
        h2 { font-size: 1.6em; margin-top: 1.5em; }
        h3 { font-size: 1.2em; border-bottom: none; }

        p {
            font-size: 1em;
        }
        table {
            width: 85%;
            margin: 30px auto;
            border-collapse: collapse;
        }
        th, td {
            border: 1px solid #ccc;
            padding: 15px;
            text-align: center;
            font-size: 0.9em;
        }
        .remark {
            background-color: #f0f7ff;
            border-left: 5px solid #005a9c;
            padding: 20px;
            margin: 20px 0;
            font-style: italic;
            font-size: 1em;
        }
        .example-box {
            background-color: #f9f9f9;
            border: 1px solid #e0e0e0;
            padding: 25px;
            margin: 20px 0;
            border-radius: 5px;
        }
        .example-box h3 {
            margin-top: 0;
            color: #005a9c;
            font-size: 1.1em;
        }
        .example-box p {
            font-size: 0.95em;
        }

        .img-placeholder {
            max-width: 80%;
            height: 400px;
            display: block;
            margin: 30px auto;
            border: 2px dashed #ccc;
            border-radius: 4px;
            display: flex;
            align-items: center;
            justify-content: center;
            text-align: center;
            color: #999;
            font-style: italic;
            font-size: 1.2em;
            background-color: #f9f9f9;
        }
        img {
            max-width: 80%;
            height: auto;
            display: block;
            margin: 30px auto;
            border: 1px solid #ccc;
            border-radius: 4px;
        }
        th {
            background-color: #f2f8ff;
            color: #003366;
        }

        /* Styles for text display */
        .hidden-text {
            display: none;
        }
        .controls {
            position: sticky;
            top: 0;
            background-color: #fdfdfd;
            padding: 10px 0;
            margin-bottom: 20px;
            border-bottom: 1px solid #eee;
            z-index: 1000;
            text-align: center;
        }
        .controls button, .controls select {
            padding: 8px 15px;
            margin: 0 5px;
            border: 1px solid #005a9c;
            border-radius: 4px;
            background-color: #007bff;
            color: white;
            cursor: pointer;
            font-size: 1em;
            transition: background-color 0.2s ease;
        }
        .controls button:hover, .controls select:hover {
            background-color: #0056b3;
        }
        .controls select {
            background-color: #f2f8ff;
            color: #003366;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="controls">
            <button id="pausePlayButton">Play</button>
            <select id="speedSelect">
                <option value="1">1x Speed</option>
                <option value="1.5">1.5x Speed</option>
                <option value="2">2x Speed</option>
                <option value="0.5">0.5x Speed</option>
            </select>
            <button id="showAllButton">Show All</button>
        </div>

        <div id="lecture-content">
            <h1>Lecture 2: A Brief Pre-Calculus Review</h1>
            <p>We continue with our precalculus review. We'll see how we can derive a function from real-world data to model the physical world. This serves as our entry point to discussing the broader families of functions, which are the essential building blocks of everything we will do in calculus.</p>

            <hr>

            <h2>From Data to a Mathematical Model</h2>
            <p>It's a common observation that crickets chirp more frequently as the temperature rises. Let's imagine we're field biologists who have collected the following data:</p>

            <table>
                <tr>
                    <th>Temperature (°C), $T$</th>
                    <th>Chirps per Minute, $C$</th>
                </tr>
                <tr>
                    <td>20</td>
                    <td>80</td>
                </tr>
                <tr>
                    <td>22</td>
                    <td>90</td>
                </tr>
                <tr>
                    <td>25</td>
                    <td>105</td>
                </tr>
                <tr>
                    <td>28</td>
                    <td>120</td>
                </tr>
                <tr>
                    <td>30</td>
                    <td>130</td>
                </tr>
            </table>

            <p>Our first step is to visualize the data. We'll plot temperature on the x-axis (our independent variable) and chirps per minute on the y-axis (our dependent variable).</p>

            <img src="plot_scatter.png" alt="Scatter plot of cricket data">

            <p class="remark">Scientists and engineers live by this principle: visualize your data first. A plot reveals patterns that a table of numbers can hide. Here, the points form a nearly perfect line, which suggests a linear relationship.</p>

            <h3>Creating a Formula</h3>
            <p>To create a formula, we can use the point-slope form of a linear equation, $y - y_1 = m(x - x_1)$. In our context, this is $C - C_1 = m(T - T_1)$. We need to find the slope ($m$) and then use one of our data points.</p>
            <p>Let's find the slope using two points from our data, $(T_1, C_1) = (20, 80)$ and $(T_2, C_2) = (30, 130)$:</p>
            <p>$$m = \frac{\text{change in chirps}}{\text{change in temperature}} = \frac{\Delta C}{\Delta T} = \frac{130 - 80}{30 - 20} = \frac{50}{10} = 5$$</p>
            <p>The slope is 5 chirps/minute per degree Celsius. Now we use the point-slope form with $m=5$ and the point $(T_1, C_1) = (20, 80)$:</p>
            <p>$$ C - C_1 = m(T - T_1) $$</p>
            <p>$$ C - 80 = 5(T - 20) $$</p>
            <p>Now, let's solve for $C$ to get the slope-intercept form:</p>
            <p>$$ C = 5T - 100 + 80 $$</p>
            <p>$$ C = 5T - 20 $$</p>
            <p>So, our formula is $C(T) = 5T - 20$. Let's plot this line on our graph to see how well it fits the data.</p>

            <img src="plot_line_fit.png" alt="Scatter plot with line of best fit">

            <h3>Making a Prediction</h3>
            <p>Now for the powerful part. We can use our model to make a prediction for a temperature not in our data set, like 26°C.</p>
            <p>$$ C(26) = 5(26) - 20 = 130 - 20 = 110 $$</p>
            <p>Our model predicts that at 26°C, the crickets will chirp approximately 110 times per minute.</p>

            <hr>

            <h2>The Formal Definition of a Function</h2>
            <p>This leads us to the formal definition of a function. A linear model is just one specific type of function.</p>
            <p>A <strong>function</strong> $f$ is a rule that assigns to each element $x$ in a set $D$ (the <strong>domain</strong>) exactly one element, $f(x)$, in a set $E$ (the <strong>codomain</strong>). The set of all possible values of $f(x)$ as $x$ varies throughout the domain is called the <strong>range</strong> of the function.</p>

            <hr>

            <h2>Families of Functions</h2>
            <p>In calculus, we'll study many types of functions. Let's briefly review the most common families.</p>

            <h3>1. Polynomial Functions</h3>
            <p>A polynomial is a function of the form $P(x) = a_n x^n + a_{n-1} x^{n-1} + \dots + a_1 x + a_0$. The shape of the graph is largely determined by its <strong>degree</strong>, $n$.</p>

            <div class="img-placeholder">Image 3: Polynomial functions ($x^2$ vs $x^3-x$)</div>

            <h3>2. Exponential Functions</h3>
            <p>An exponential function has the form $f(x) = b^x$, where the base $b$ is a positive constant. These model phenomena like population growth and radioactive decay. The special base $e \approx 2.71828$ is the most common in calculus.</p>
            <p>If $b > 1$, the function shows growth. If $0 < b < 1$, the function shows decay. A negative exponent, as in $e^{-x} = (1/e)^x$, also indicates decay.</p>

            <div class="img-placeholder">Image 4: Exponential functions ($(1/2)^x, 2^x, e^x, e^{-x}$)</div>

            <h4>General Properties of Exponents</h4>
            <table>
                <tr>
                    <th>Property Name</th>
                    <th>Rule</th>
                    <th>Description</th>
                </tr>
                <tr>
                    <td>Product of Powers</td>
                    <td>$b^x \cdot b^y = b^{x+y}$</td>
                    <td>When multiplying powers with the same base, add the exponents.</td>
                </tr>
                <tr>
                    <td>Quotient of Powers</td>
                    <td>$\frac{b^x}{b^y} = b^{x-y}$</td>
                    <td>When dividing powers with the same base, subtract the exponents.</td>
                </tr>
                <tr>
                    <td>Power of a Power</td>
                    <td>$(b^x)^y = b^{xy}$</td>
                    <td>When raising a power to another power, multiply the exponents.</td>
                </tr>
                <tr>
                    <td>Zero Exponent</td>
                    <td>$b^0 = 1$</td>
                    <td>Any non-zero base raised to the power of zero is 1.</td>
                </tr>
                <tr>
                    <td>Negative Exponent</td>
                    <td>$b^{-x} = \frac{1}{b^x}$</td>
                    <td>A negative exponent indicates the reciprocal of the base raised to the positive exponent.</td>
                </tr>
                <tr>
                    <td>Fractional Exponent</td>
                    <td>$b^{m/n} = \sqrt[n]{b^m} = (\sqrt[n]{b})^m$</td>
                    <td>A fractional exponent indicates a root and a power.</td>
                </tr>
            </table>

            <div class="example-box">
                <h3>Simplifying Exponential Expressions</h3>
                <p><strong>1. Product of Powers:</strong> Simplify $(4x^3y^2)(5x^4y)$.<br>
                <strong>Solution:</strong> $(4 \cdot 5)(x^{3+4})(y^{2+1}) = 20x^7y^3$.</p>
                <p><strong>2. Power of a Quotient:</strong> Simplify $\left(\frac{2a^4}{b^2}\right)^3$.<br>
                <strong>Solution:</strong> $\frac{2^3 (a^4)^3}{(b^2)^3} = \frac{8a^{12}}{b^6}$.</p>
                <p><strong>3. Negative Exponents:</strong> Simplify $\frac{(x^{-2}y^3)^{-2}}{(x^3y^{-1})^2}$.<br>
                <strong>Solution:</strong> $\frac{x^{(-2)(-2)}y^{(3)(-2)}}{x^{(3)(2)}y^{(-1)(2)}} = \frac{x^4y^{-6}}{x^6y^{-2}} = x^{-2}y^{-4} = \frac{1}{x^2y^4}$.</p>
            </div>

            <h3>3. Trigonometric Functions</h3>
            <p>Trigonometric functions are essential for describing periodic phenomena like waves and rotations. They are defined using the <strong>unit circle</strong>—a circle with a radius of 1 centered at the origin.</p>
            <p>For any angle $\theta$, the point $(x,y)$ where the angle's terminal side intersects the unit circle gives us $x = \cos(\theta)$ and $y = \sin(\theta)$.</p>

            <div class="img-placeholder">Image 5: The Unit Circle with Key Angles</div>

            <h4>Trigonometric Values for Key Angles</h4>
            <table>
                <tr>
                    <th>$\theta$</th>
                    <th>$0$</th>
                    <th>$\pi/6$</th>
                    <th>$\pi/4$</th>
                    <th>$\pi/3$</th>
                    <th>$\pi/2$</th>
                    <th>$\pi$</th>
                    <th>$3\pi/2$</th>
                    <th>$2\pi$</th>
                </tr>
                <tr>
                    <td><strong>$\sin(\theta)$</strong></td>
                    <td>$0$</td>
                    <td>$1/2$</td>
                    <td>$\sqrt{2}/2$</td>
                    <td>$\sqrt{3}/2$</td>
                    <td>$1$</td>
                    <td>$0$</td>
                    <td>$-1$</td>
                    <td>$0$</td>
                </tr>
                <tr>
                    <td><strong>$\cos(\theta)$</strong></td>
                    <td>$1$</td>
                    <td>$\sqrt{3}/2$</td>
                    <td>$\sqrt{2}/2$</td>
                    <td>$1/2$</td>
                    <td>$0$</td>
                    <td>$-1$</td>
                    <td>$0$</td>
                    <td>$1$</td>
                </tr>
                <tr>
                    <td><strong>$\tan(\theta)$</strong></td>
                    <td>$0$</td>
                    <td>$\sqrt{3}/3$</td>
                    <td>$1$</td>
                    <td>$\sqrt{3}$</td>
                    <td>undefined</td>
                    <td>$0$</td>
                    <td>undefined</td>
                    <td>$0$</td>
                </tr>
            </table>

            <h4>Graphs of Trigonometric Functions</h4>
            <div class="img-placeholder">Image 5a: Graph of $y = \sin(x)$</div>

            <div class="img-placeholder">Image 5b: Graph of $y = \cos(x)$</div>

            <div class="img-placeholder">Image 5c: Graph of $y = \tan(x)$</div>

            <h3>4. Logarithmic Functions</h3>
            <p>A logarithmic function answers the question: "what exponent must we raise a base to, in order to get a certain number?" The expression $y = \log_b(x)$ is read as "y is the logarithm to the base b of x".</p>
            <p>For example, $\log_2(8) = 3$ because we must raise the base $2$ to the power of $3$ to get $8$. That is, $2^3=8$.</p>

            <div class="img-placeholder">Image 6: Logarithmic functions ($\log_2(x), \log_{10}(x), \log_{100}(x)$)</div>

            <h4>General Properties of Logarithms</h4>
            <table>
                <tr>
                    <th>Property Name</th>
                    <th>Rule</th>
                    <th>Description</th>
                </tr>
                <tr>
                    <td>Product Rule</td>
                    <td>$\log_b(xy) = \log_b(x) + \log_b(y)$</td>
                    <td>The logarithm of a product is the sum of the logarithms.</td>
                </tr>
                <tr>
                    <td>Quotient Rule</td>
                    <td>$\log_b\left(\frac{x}{y}\right) = \log_b(x) - \log_b(y)$</td>
                    <td>The logarithm of a quotient is the difference of the logarithms.</td>
                </tr>
                <tr>
                    <td>Power Rule</td>
                    <td>$\log_b(x^n) = n \cdot \log_b(x)$</td>
                    <td>The logarithm of a power is the exponent times the logarithm of the base.</td>
                </tr>
                <tr>
                    <td>Logarithm of One</td>
                    <td>$\log_b(1) = 0$</td>
                    <td>The logarithm of 1 to any base is 0.</td>
                </tr>
                <tr>
                    <td>Logarithm of Base</td>
                    <td>$\log_b(b) = 1$</td>
                    <td>The logarithm of the base to itself is 1.</td>
                </tr>
                <tr>
                    <td>Natural Logarithm</td>
                    <td>$\log_e(x) = \ln(x)$</td>
                    <td>The natural logarithm uses Euler's number ($e$) as its base.</td>
                </tr>
            </table>

            <div class="example-box">
                <h3>Simplifying Logarithmic Expressions</h3>
                <p><strong>1. Expand an expression:</strong> Expand $\log_3(9x^2y)$.<br>
                <strong>Solution:</strong> $\log_3(9) + \log_3(x^2) + \log_3(y) = 2 + 2\log_3(x) + \log_3(y)$.</p>
                <p><strong>2. Condense an expression:</strong> Condense $2\ln(x) + \ln(x+1) - 3\ln(y)$.<br>
                <strong>Solution:</strong> $\ln(x^2) + \ln(x+1) - \ln(y^3) = \ln\left(\frac{x^2(x+1)}{y^3}\right)$.</p>
                <p><strong>3. Use the Change of Base rule:</strong> Simplify $\log_4(64)$ using base 2.<br>
                <strong>Rule:</strong> $\log_b(a) = \frac{\log_c(a)}{\log_c(b)}$.<br>
                <strong>Solution:</strong> $\log_4(64) = \frac{\log_2(64)}{\log_2(4)} = \frac{6}{2} = 3$.</p>
            </div>

            <hr>

            <h2>Function Composition and Inverses</h2>

            <h3>Function Composition</h3>
            <p>Composition is the act of applying one function to the result of another. The composition of $f$ and $g$ is written $(f \circ g)(x)$ and is defined as $f(g(x))$. You work from the inside out.</p>

            <div class="example-box">
                <h3>Composition Examples</h3>
                <p>Let \(f(x) = x^2\), \(g(x) = x-3\), and \(h(x) = \cos(x)\).</p>
                <p>1. \( (f \circ g)(x) = f(g(x)) = f(x-3) = (x-3)^2 = x^2 - 6x + 9 \).</p>
                <p>2. \( (g \circ f)(x) = g(f(x)) = g(x^2) = x^2 - 3 \).</p>
                <p>3. \( (f \circ h)(x) = f(h(x)) = f(\cos(x)) = (\cos(x))^2 = \cos^2(x) \).</p>
            </div>
            <div class="example-box">
                <h3>Decomposition Examples</h3>
                <p>Decomposition is the reverse process. Given a complicated function, we find simpler functions that compose to create it.</p>
                <p>1. $F(x) = \sqrt{x+4}$. Let inner function $g(x)=x+4$ and outer function $f(x)=\sqrt{x}$. Then $F(x)=f(g(x))$.</p>
                <p>2. $G(x) = e^{2x}$. Let inner function $g(x)=2x$ and outer function $f(x)=e^x$. Then $G(x)=f(g(x))$.</p>
                <p>3. $H(x) = (\ln x)^3$. Let inner function $g(x)=\ln x$ and outer function $f(x)=x^3$. Then $H(x)=f(g(x))$.</p>
            </div>

            <h3>Inverse Functions</h3>
            <p>If a function $f$ has an inverse $f^{-1}$, the inverse "undoes" the action of $f$. For this to be possible, the function must be <strong>one-to-one</strong>, meaning it passes the Horizontal Line Test.</p>
            <p>The most important pair of inverse functions for calculus is $f(x) = e^x$ and its inverse $f^{-1}(x) = \ln(x)$. They undo each other:</p>
            <p>$$ e^{\ln(x)} = x \quad \text{and} \quad \ln(e^x) = x $$</p>
            <p>Graphically, the inverse of a function is its reflection across the line $y=x$.</p>

            <div class="img-placeholder">Image 7: Inverse functions ($e^x$, $\ln(x)$, and $y=x$)</div>

            <p>That concludes our pre-calculus review. Understanding these function families and how to manipulate them is critical for your success as we move into the core concepts of calculus, starting with limits in our next lecture.</p>

            <hr>
            <h2>Unit Circle Animation</h2>
            <p>Here's an interactive animation of the unit circle, showing key angles and their trigonometric values.</p>
            <div id="unit-circle-animation"></div>

            <py-script src="unit_circle_animation.py" output="unit-circle-animation"></py-script>

        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const lectureContent = document.getElementById('lecture-content');
            const pausePlayButton = document.getElementById('pausePlayButton');
            const speedSelect = document.getElementById('speedSelect');
            const showAllButton = document.getElementById('showAllButton');

            const elementsToProcess = Array.from(lectureContent.children);
            let currentElementIndex = 0;
            let isPaused = true;
            let playbackSpeed = 1;
            let typingTimeoutId;

            // Initially hide all content
            elementsToProcess.forEach(el => {
                el.classList.add('hidden-text');
            });

            // Function to get the delay for an element
            function getElementDelay(element) {
                let delay = 2000; // Default delay
                if (element.tagName === 'P' || element.tagName === 'H2' || element.tagName === 'H3' || element.tagName === 'TD' || element.tagName === 'TH' || element.classList.contains('remark') || element.classList.contains('example-box')) {
                    const textContent = element.textContent || '';
                    const wordCount = textContent.split(/\s+/).filter(word => word.length > 0).length;
                    delay = Math.max(1000, wordCount * 150); // Approximately 150ms per word
                } else if (element.tagName === 'TABLE' || element.tagName === 'IMG' || element.classList.contains('img-placeholder')) {
                    delay = 4000; // Longer delay for larger blocks
                } else if (element.tagName === 'HR') {
                    delay = 500; // Short delay for horizontal rules
                }
                return delay / playbackSpeed;
            }

            // Function to display the next element
            function showNextElement() {
                if (isPaused) return; // If paused, do nothing

                if (currentElementIndex < elementsToProcess.length) {
                    const element = elementsToProcess[currentElementIndex];
                    element.classList.remove('hidden-text');
                    currentElementIndex++;

                    // Render MathJax for the newly revealed element
                    if (window.MathJax) {
                        MathJax.typesetPromise([element]).then(() => {
                            // Only scroll if the element is not already mostly in view
                            const rect = element.getBoundingClientRect();
                            const isVisible = (rect.top >= 0 && rect.bottom <= (window.innerHeight || document.documentElement.clientHeight));
                            if (!isVisible) {
                                element.scrollIntoView({ behavior: 'smooth', block: 'end' });
                            }
                        }).catch((err) => console.error('MathJax rendering failed for element:', element, err));
                    } else {
                        const rect = element.getBoundingClientRect();
                        const isVisible = (rect.top >= 0 && rect.bottom <= (window.innerHeight || document.documentElement.clientHeight));
                        if (!isVisible) {
                            element.scrollIntoView({ behavior: 'smooth', block: 'end' });
                        }
                    }

                    const delay = getElementDelay(element);
                    typingTimeoutId = setTimeout(showNextElement, delay);

                } else {
                    // All content has been displayed
                    pausePlayButton.textContent = 'Restart';
                    isPaused = true; // Automatically pause at the end
                }
            }

            function togglePausePlay() {
                if (isPaused) {
                    isPaused = false;
                    pausePlayButton.textContent = 'Pause';
                    if (currentElementIndex === elementsToProcess.length) {
                        // If all text was shown, reset and start from the beginning
                        resetLecture();
                    }
                    showNextElement(); // Start or resume playing
                } else {
                    isPaused = true;
                    pausePlayButton.textContent = 'Play';
                    clearTimeout(typingTimeoutId); // Stop the timer
                }
            }

            function changePlaybackSpeed() {
                playbackSpeed = parseFloat(speedSelect.value);
                // If currently playing, restart the timer with the new speed
                if (!isPaused) {
                    clearTimeout(typingTimeoutId);
                    // showNextElement will calculate the delay for the *next* element
                    showNextElement();
                }
            }

            function showAllContent() {
                clearTimeout(typingTimeoutId);
                elementsToProcess.forEach(el => {
                    el.classList.remove('hidden-text');
                });
                if (window.MathJax) {
                    MathJax.typesetPromise([lectureContent]).catch((err) => console.error('MathJax rendering failed for all content:', err));
                }
                currentElementIndex = elementsToProcess.length; // Mark as all shown
                isPaused = true;
                pausePlayButton.textContent = 'Restart';
            }

            function resetLecture() {
                clearTimeout(typingTimeoutId);
                elementsToProcess.forEach(el => {
                    el.classList.add('hidden-text');
                });
                currentElementIndex = 0;
                pausePlayButton.textContent = 'Play';
                isPaused = true; // Ensure it's paused after reset
            }

            // Event Listeners
            pausePlayButton.addEventListener('click', togglePausePlay);
            speedSelect.addEventListener('change', changePlaybackSpeed);
            showAllButton.addEventListener('click', showAllContent);

            // Set initial state: Start with "Play" button text and all content hidden.
            // User must click play to begin.
        });
    </script>
</body>
</html>